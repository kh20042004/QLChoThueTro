# üè† H·ªá Th·ªëng Cho Thu√™ Nh√†/Ph√≤ng Tr·ªç v·ªõi AI

M·ªôt h·ªá th·ªëng qu·∫£n l√Ω cho thu√™ nh√†/ph√≤ng tr·ªç hi·ªán ƒë·∫°i, ƒë∆∞·ª£c x√¢y d·ª±ng b·∫±ng Node.js, Express, MongoDB v√† t√≠ch h·ª£p c√¥ng ngh·ªá AI.

## üìã M·ª•c L·ª•c

- [T√≠nh NƒÉng](#t√≠nh-nƒÉng)
- [C√¥ng Ngh·ªá](#c√¥ng-ngh·ªá)
- [C√†i ƒê·∫∑t](#c√†i-ƒë·∫∑t)
- [C·∫•u H√¨nh](#c·∫•u-h√¨nh)
- [Ch·∫°y ·ª®ng D·ª•ng](#ch·∫°y-·ª©ng-d·ª•ng)
- [API Documentation](#api-documentation)
- [C·∫•u Tr√∫c Th∆∞ M·ª•c](#c·∫•u-tr√∫c-th∆∞-m·ª•c)

## ‚ú® T√≠nh NƒÉng

### Ng∆∞·ªùi D√πng
- ‚úÖ ƒêƒÉng k√Ω, ƒëƒÉng nh·∫≠p, qu√™n m·∫≠t kh·∫©u
- ‚úÖ T√¨m ki·∫øm ph√≤ng tr·ªç theo nhi·ªÅu ti√™u ch√≠
- ‚úÖ Xem chi ti·∫øt ph√≤ng v·ªõi h√¨nh ·∫£nh, ƒë·ªãa ch·ªâ, gi√° c·∫£
- ‚úÖ ƒê√°nh gi√° v√† nh·∫≠n x√©t ph√≤ng ƒë√£ thu√™
- ‚úÖ ƒê·∫∑t ph√≤ng v√† qu·∫£n l√Ω booking
- ü§ñ T√¨m ki·∫øm th√¥ng minh b·∫±ng AI
- üí¨ Chatbot h·ªó tr·ª£ 24/7

### Ch·ªß Nh√†
- ‚úÖ ƒêƒÉng tin cho thu√™ ph√≤ng/nh√†
- ‚úÖ Qu·∫£n l√Ω danh s√°ch ph√≤ng
- ‚úÖ Theo d√µi booking v√† thanh to√°n
- ‚úÖ Xem th·ªëng k√™ v√† b√°o c√°o
- üì∏ X√°c th·ª±c ·∫£nh t·ª± ƒë·ªông b·∫±ng AI

### Admin
- ‚úÖ Qu·∫£n l√Ω ng∆∞·ªùi d√πng
- ‚úÖ Qu·∫£n l√Ω t·∫•t c·∫£ ph√≤ng v√† booking
- ‚úÖ Xem th·ªëng k√™ to√†n h·ªá th·ªëng

### T√≠nh NƒÉng AI
- ü§ñ G·ª£i √Ω ph√≤ng ph√π h·ª£p d·ª±a tr√™n s·ªü th√≠ch
- üì∏ Nh·∫≠n di·ªán v√† ph√¢n lo·∫°i ·∫£nh ph√≤ng
- üí¨ Chatbot t∆∞ v·∫•n th√¥ng minh
- üîç T√¨m ki·∫øm ng·ªØ nghƒ©a (Semantic Search)
- üéØ **Nh·∫≠n di·ªán ti·ªán nghi t·ª´ ·∫£nh** - NEW!
- ‚úÖ **Ki·ªÉm duy·ªát t·ª± ƒë·ªông b·∫±ng AI** - NEW!
- üìä **ƒê√°nh gi√° ch·∫•t l∆∞·ª£ng b√†i ƒëƒÉng** - NEW!

## üõ† C√¥ng Ngh·ªá

### Backend
- **Node.js** - Runtime environment
- **Express.js** - Web framework
- **MySQL** - Relational database
- **Sequelize** - ORM cho MySQL
- **JWT** - Authentication
- **Bcrypt** - M√£ h√≥a m·∫≠t kh·∫©u

### Frontend
- **HTML5** - Markup
- **CSS3** - Styling
- **Bootstrap 5** - CSS framework
- **JavaScript (ES6+)** - Programming
- **Font Awesome** - Icons

### AI & Machine Learning
- **TensorFlow.js** - Image recognition
- **OpenAI API** - Chatbot & NLP
- **Sharp** - Image processing

### Tools & Libraries
- **Multer** - File upload
- **Nodemailer** - Email service
- **Morgan** - Logging
- **Helmet** - Security
- **CORS** - Cross-origin resource sharing
- **Compression** - Gzip compression

## üì¶ C√†i ƒê·∫∑t

### Y√™u C·∫ßu H·ªá Th·ªëng
- Node.js >= 16.x
- MySQL >= 8.0
- NPM ho·∫∑c Yarn

### C√°c B∆∞·ªõc C√†i ƒê·∫∑t

1. **Clone repository**
```bash
git clone https://github.com/yourusername/room-rental-system.git
cd room-rental-system
```

2. **C√†i ƒë·∫∑t dependencies**
```bash
npm install
```

3. **T·∫°o file .env**
```bash
cp .env.example .env
```

4. **C·∫•u h√¨nh file .env** (xem ph·∫ßn [C·∫•u H√¨nh](#c·∫•u-h√¨nh))

5. **T·∫°o database MySQL**
```sql
CREATE DATABASE room_rental_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

6. **Ch·∫°y MySQL Server**
```bash
# ƒê·∫£m b·∫£o MySQL ƒëang ch·∫°y
# Windows: Services -> MySQL
# Linux: sudo service mysql start
# Mac: brew services start mysql
```

## ‚öôÔ∏è C·∫•u H√¨nh

T·∫°o file `.env` trong th∆∞ m·ª•c g·ªëc v·ªõi n·ªôi dung:

```env
# Server Configuration
PORT=3000
NODE_ENV=development

# MySQL Database Configuration
DB_HOST=localhost
DB_PORT=3306
DB_NAME=room_rental_db
DB_USER=root
DB_PASSWORD=your_mysql_password

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRE=7d
JWT_COOKIE_EXPIRE=7

# Email Configuration
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USERNAME=your-email@gmail.com
EMAIL_PASSWORD=your-app-password
EMAIL_FROM=noreply@roomrental.com

# AI Configuration
OPENAI_API_KEY=your-openai-api-key-here

# File Upload Configuration
MAX_FILE_SIZE=5242880
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/jpg

# Session Configuration
SESSION_SECRET=your-session-secret-key-change-this

# Client URL
CLIENT_URL=http://localhost:3000
```

### C·∫•u H√¨nh MySQL
1. C√†i ƒë·∫∑t MySQL Server (n·∫øu ch∆∞a c√≥): https://dev.mysql.com/downloads/
2. T·∫°o database:
```sql
CREATE DATABASE room_rental_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```
3. C·∫≠p nh·∫≠t th√¥ng tin trong file `.env`:
   - `DB_USER`: username MySQL c·ªßa b·∫°n (m·∫∑c ƒë·ªãnh: root)
   - `DB_PASSWORD`: password MySQL c·ªßa b·∫°n
   - `DB_NAME`: t√™n database (m·∫∑c ƒë·ªãnh: room_rental_db)

### L·∫•y OpenAI API Key
1. Truy c·∫≠p https://platform.openai.com
2. ƒêƒÉng k√Ω/ƒêƒÉng nh·∫≠p
3. T·∫°o API key t·∫°i https://platform.openai.com/api-keys

## üöÄ Ch·∫°y ·ª®ng D·ª•ng

### Development Mode
```bash
npm run dev
```

### Production Mode
```bash
npm start
```

Server s·∫Ω ch·∫°y t·∫°i: `http://localhost:3000`

## üìö API Documentation

### Authentication Endpoints

#### ƒêƒÉng k√Ω
```http
POST /api/auth/register
Content-Type: application/json

{
  "name": "Nguy·ªÖn VƒÉn A",
  "email": "user@example.com",
  "phone": "0123456789",
  "password": "123456",
  "role": "user"
}
```

#### ƒêƒÉng nh·∫≠p
```http
POST /api/auth/login
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "123456"
}
```

#### L·∫•y th√¥ng tin user
```http
GET /api/auth/me
Authorization: Bearer {token}
```

### Property Endpoints

#### L·∫•y danh s√°ch ph√≤ng
```http
GET /api/properties?page=1&limit=10&propertyType=phong-tro&city=ha-noi
```

#### L·∫•y chi ti·∫øt 1 ph√≤ng
```http
GET /api/properties/:id
```

#### T·∫°o ph√≤ng m·ªõi (Landlord only)
```http
POST /api/properties
Authorization: Bearer {token}
Content-Type: application/json

{
  "title": "Ph√≤ng tr·ªç cao c·∫•p Q1",
  "description": "Ph√≤ng ƒë·∫πp, ƒë·∫ßy ƒë·ªß ti·ªán nghi",
  "propertyType": "phong-tro",
  "price": 3500000,
  "area": 25,
  "address": {
    "street": "123 Nguy·ªÖn Hu·ªá",
    "ward": "Ph∆∞·ªùng B·∫øn Ngh√©",
    "district": "Qu·∫≠n 1",
    "city": "TP. H·ªì Ch√≠ Minh"
  }
}
```

### Booking Endpoints

#### T·∫°o booking m·ªõi
```http
POST /api/bookings
Authorization: Bearer {token}
Content-Type: application/json

{
  "property": "property_id",
  "startDate": "2024-01-01",
  "endDate": "2024-12-31",
  "notes": "Ghi ch√∫"
}
```

### Review Endpoints

#### T·∫°o ƒë√°nh gi√°
```http
POST /api/reviews
Authorization: Bearer {token}
Content-Type: application/json

{
  "property": "property_id",
  "rating": 5,
  "title": "Ph√≤ng r·∫•t t·ªët",
  "comment": "Ph√≤ng s·∫°ch s·∫Ω, ch·ªß nh√† th√¢n thi·ªán"
}
```

### AI Endpoints

#### Chatbot
```http
POST /api/ai/chatbot
Content-Type: application/json

{
  "message": "T√¥i c·∫ßn t√¨m ph√≤ng tr·ªç g·∫ßn tr∆∞·ªùng ƒë·∫°i h·ªçc"
}
```

#### T√¨m ki·∫øm th√¥ng minh
```http
POST /api/ai/smart-search
Content-Type: application/json

{
  "query": "ph√≤ng tr·ªç c√≥ ƒëi·ªÅu h√≤a gi√° d∆∞·ªõi 3 tri·ªáu"
}
```

## üìÅ C·∫•u Tr√∫c Th∆∞ M·ª•c

```
room-rental-system/
‚îú‚îÄ‚îÄ .github/
‚îÇ   ‚îî‚îÄ‚îÄ copilot-instructions.md
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.css
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ auth.css
‚îÇ   ‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ about.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ contact.js
‚îÇ   ‚îú‚îÄ‚îÄ images/
‚îÇ   ‚îî‚îÄ‚îÄ uploads/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ colors.js
‚îÇ   ‚îú‚îÄ‚îÄ controllers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ authController.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ propertyController.js
‚îÇ   ‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ errorHandler.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ upload.js
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ User.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Property.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Booking.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Review.js
‚îÇ   ‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ authRoutes.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ propertyRoutes.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bookingRoutes.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ reviewRoutes.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ aiRoutes.js
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ (AI services s·∫Ω ƒë∆∞·ª£c th√™m v√†o)
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îî‚îÄ‚îÄ app.js
‚îú‚îÄ‚îÄ views/
‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îú‚îÄ‚îÄ about.html
‚îÇ   ‚îú‚îÄ‚îÄ contact.html
‚îÇ   ‚îú‚îÄ‚îÄ properties.html
‚îÇ   ‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login.html
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ register.html
‚îÇ   ‚îî‚îÄ‚îÄ partials/
‚îú‚îÄ‚îÄ .env.example
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ nodemon.json
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ server.js
‚îî‚îÄ‚îÄ README.md
```

## üîê B·∫£o M·∫≠t

- ‚úÖ M√£ h√≥a m·∫≠t kh·∫©u v·ªõi Bcrypt
- ‚úÖ JWT cho authentication
- ‚úÖ Helmet.js cho HTTP headers security
- ‚úÖ Rate limiting ƒë·ªÉ ch·ªëng DDoS
- ‚úÖ Input validation v√† sanitization
- ‚úÖ CORS configuration
- ‚úÖ HttpOnly cookies

## üß™ Testing

```bash
# Ch·∫°y tests (s·∫Ω ƒë∆∞·ª£c implement)
npm test

# Test coverage
npm run coverage
```

## üìù License

MIT License - Copyright (c) 2024

## üë• Contributors

- Your Name - [GitHub](https://github.com/yourusername)

## üìû Li√™n H·ªá

- Email: info@homerent.vn
- Website: https://homerent.vn
- Facebook: https://facebook.com/homerent

## üôè Acknowledgments

- Bootstrap for UI components
- Font Awesome for icons
- OpenAI for AI capabilities
- MySQL & Sequelize for database

## üîß Database Schema

### Users Table
```sql
- id (INT, PRIMARY KEY, AUTO_INCREMENT)
- name (VARCHAR)
- email (VARCHAR, UNIQUE)
- phone (VARCHAR)
- password (VARCHAR)
- role (ENUM: user, landlord, admin)
- created_at, updated_at (TIMESTAMP)
```

### Properties Table
```sql
- id (INT, PRIMARY KEY, AUTO_INCREMENT)
- title (VARCHAR)
- description (TEXT)
- price (DECIMAL)
- address_* (VARCHAR)
- landlord_id (INT, FOREIGN KEY -> users.id)
- status (ENUM: available, rented, pending, inactive)
- created_at, updated_at (TIMESTAMP)
```

### Bookings Table
```sql
- id (INT, PRIMARY KEY, AUTO_INCREMENT)
- property_id (INT, FOREIGN KEY -> properties.id)
- tenant_id (INT, FOREIGN KEY -> users.id)
- landlord_id (INT, FOREIGN KEY -> users.id)
- status (ENUM)
- created_at, updated_at (TIMESTAMP)
```

### Reviews Table
```sql
- id (INT, PRIMARY KEY, AUTO_INCREMENT)
- property_id (INT, FOREIGN KEY -> properties.id)
- user_id (INT, FOREIGN KEY -> users.id)
- rating (INT 1-5)
- comment (TEXT)
- created_at, updated_at (TIMESTAMP)
```

---

**Made with ‚ù§Ô∏è by HomeRent Team**
